import { readFileSync, writeFileSync } from 'fs';
import path from 'path';

const frJsonPath = path.resolve(process.cwd(), 'src/locales/fr.json');
const outputPath = path.resolve(process.cwd(), 'src/types/generated-locale-keys.d.ts');

try {
  const frJsonContent = readFileSync(frJsonPath, 'utf8');
  const translations = JSON.parse(frJsonContent);

  const keys = Object.keys(translations).map(key => `  | "${key}"`).join('\n');

  const dtsContent = `// This file is generated automatically by generate-translation-keys.mjs\n// Do not edit this file directly.\n\nexport type LocaleKey =\n${keys};\n`;

  writeFileSync(outputPath, dtsContent, 'utf8');
  console.log('Successfully generated apps/web/src/types/generated-locale-keys.d.ts');
} catch (error) {
  console.error('Error generating translation keys:', error);
  process.exit(1);
}
